[gd_scene load_steps=3 format=2]

[sub_resource type="GDScript" id=5]
script/source = "extends Spatial

export(float) var speed :float = 0.0 
export(float) var hight :float = 1.0
export(float) var distance : float = 1.0
var time :float = 0.0

var i_pos : Vector3

func _ready():
	i_pos = transform.origin

func _unhandled_input(event):
	if event is InputEventScreenTouch and not event.is_pressed():
		jump()

func _process(delta :float):
		if not $on_floor.is_colliding():
			time -= delta * speed
			if time < 0.0:
				time = distance
			anim_jump()

func anim_jump():
	transform.origin.y = i_pos.y + (hight/pow(distance/2.0, 2.0)) * (- pow((distance - time),2.0) + distance * (distance - time))

func jump():
	transform.origin.y = i_pos.y + 0.12
"

[sub_resource type="CapsuleMesh" id=1]

[node name="player" type="Spatial"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0 )
script = SubResource( 5 )
speed = 1.5
hight = 4.0

[node name="mesh" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0 )
mesh = SubResource( 1 )

[node name="on_floor" type="RayCast" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.5, 0 )
enabled = true
cast_to = Vector3( 0, -0.1, 0 )
debug_shape_custom_color = Color( 0, 0.156863, 1, 1 )

[node name="forward" type="RayCast" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.5, -1 )
enabled = true
cast_to = Vector3( 0, -0.1, 0 )
debug_shape_custom_color = Color( 0.290196, 1, 0, 1 )

[node name="backward" type="RayCast" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.5, 1 )
enabled = true
cast_to = Vector3( 0, -0.1, 0 )
debug_shape_custom_color = Color( 0.290196, 1, 0, 1 )
